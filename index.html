<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Schließdienst</title>

  <!-- FullCalendar (inkl. list view & dayGrid) -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.js"></script>

  <style>
    :root { --maxw: 1100px; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 24px; }
    header { max-width: var(--maxw); margin: 0 auto 16px auto; display: flex; gap: 12px; align-items: baseline; flex-wrap: wrap; }
    header h1 { margin: 0; font-size: 22px; }
    header .hint { color: #555; font-size: 14px; }
    #calendar { max-width: var(--maxw); margin: 0 auto; }

    /* Mobile spacing */
    @media (max-width: 600px) {
      body { margin: 14px; }
      header h1 { font-size: 18px; }
    }
  </style>
</head>

<body>
  <header>
    <h1>Schließdienst</h1>
    <div class="hint">Kalender- und Listenansicht oben rechts umschalten.</div>
  </header>

  <div id="calendar"></div>

  <script>
    // JSON muss im gleichen Repo liegen: events.json
    // Beispiel-Inhalt: []
    const eventsUrl = "./events.json";

    // Mobile: lieber Liste als Monatsgrid
    const isMobile = window.matchMedia("(max-width: 768px)").matches;

    const calendarEl = document.getElementById("calendar");
    const calendar = new FullCalendar.Calendar(calendarEl, {
      locale: "de",
      initialView: isMobile ? "listWeek" : "dayGridMonth",
      height: "auto",

      headerToolbar: {
        left: "prev,next today",
        center: "title",
        right: "dayGridMonth,listMonth,listWeek"
      },

      // JSON-Events laden
      events: eventsUrl,

      // Optional: saubere Darstellung bei Ganztagsterminen
      displayEventTime: true,

      // Optional: Tooltip (Browser-native title)
      eventDidMount: function(info) {
        const sd = info.event.extendedProps?.schliessdienst;
        if (sd) {
          info.el.title = `Schließdienst: ${sd}`;
        }
      }
    });

    calendar.render();
  </script>
</body>
</html>
